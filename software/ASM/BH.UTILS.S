********************************
* BYTE HAMR UTILITIES V1.0.0   *
********************************
*
 ORG $8000
 JMP MAIN
*
* * APPLE //E ROUTINES
*
COUT EQU $FDED
HOME EQU $FC58
WAIT EQU $FCA8
VTAB EQU $FC22
ZP_ADDR EQU $F0
CR EQU $8D
CH EQU $24
CV EQU $25
*
* * VARIABLES
*
DELAY DS 1
** SET VARS
SETDELAY LDA #$FF
 STA DELAY
*
* * MAIN ROUTINE
*
MAIN JSR HOME
 JSR MAIN_MENU
 JSR GET_CHOICE
 JSR DISPATCH
 LDX #5
 LDA DELAY
:WAIT JSR WAIT
 DEX
 BNE :WAIT
 JMP MAIN
********************************
* SUBROUTINES                  *
********************************
*
GET_KEY LDA $C000
 BPL GET_KEY ;LOOP UNTIL KEYPRESS
 STA $C010
 RTS
PRINT LDY #$00
:LOOP LDA (ZP_ADDR),Y
 BEQ :DONE
 JSR COUT
 INY
 BNE :LOOP
:DONE RTS
*
GET_CHOICE
 JSR GET_KEY
 JSR COUT
 AND #$0F
 CMP #1 ;>= 1?
 BCC GET_CHOICE
 CMP #6 ; < 6?
 BCS GET_CHOICE
 RTS
*
DISPATCH
 PHA
 LDA #CR
 JSR COUT
 PLA
 CMP #1
 BEQ OPTION_1
 CMP #2
 BEQ OPTION_2
 CMP #3
 BEQ OPTION_3
 CMP #4
 BEQ OPTION_4
 CMP #5
 BEQ OPTION_5
 RTS
********************************
* HANDLERS                     *
********************************
*
OPTION_1
 LDA #<MSG_OPT1
 STA ZP_ADDR
 LDA #>MSG_OPT1
 STA ZP_ADDR+1
 JSR PRINT
 RTS
OPTION_2
 LDA #<MSG_OPT2
 STA ZP_ADDR
 LDA #>MSG_OPT2
 STA ZP_ADDR+1
 JSR PRINT
 RTS
*
OPTION_3
 LDA #<MSG_OPT3
 STA ZP_ADDR
 LDA #>MSG_OPT3
 STA ZP_ADDR+1
 JSR PRINT
 RTS
*
OPTION_4
 LDA #<MSG_OPT4
 STA ZP_ADDR
 LDA #>MSG_OPT4
 STA ZP_ADDR+1
 JSR PRINT
 RTS
*
OPTION_5
 LDA #<MSG_OPT5
 STA ZP_ADDR
 LDA #>MSG_OPT5
 STA ZP_ADDR+1
 JSR PRINT
 JMP $FF69
*
*
MAIN_MENU
 LDA #2
 STA CV
 JSR VTAB
 LDA #32
 STA CH
 LDA #<MSG_TITLE
 STA ZP_ADDR
 LDA #>MSG_TITLE
 STA ZP_ADDR+1
 JSR PRINT
*
 LDA #3
 STA CV
 JSR VTAB
 LDA #36
 STA CH
 LDA #<MSG_VER
 STA ZP_ADDR
 LDA #>MSG_VER
 STA ZP_ADDR+1
 JSR PRINT
*
 LDA #4
 STA CV
 JSR VTAB
 LDA #35
 STA CH
 LDA #<MSG_AUTH
 STA ZP_ADDR
 LDA #>MSG_AUTH
 STA ZP_ADDR+1
 JSR PRINT
*
 LDA #6
 STA CV
 JSR VTAB
 LDA #31
 STA CH
 LDA #<MSG_DIV
 STA ZP_ADDR
 LDA #>MSG_DIV
 STA ZP_ADDR+1
 JSR PRINT
*
 LDA #7
 STA CV
 JSR VTAB
 LDA #32
 STA CH
 LDA #<MSG_OPT1T
 STA ZP_ADDR
 LDA #>MSG_OPT1T
 STA ZP_ADDR+1
 JSR PRINT
*
 LDA #8
 STA CV
 JSR VTAB
 LDA #32
 STA CH
 LDA #<MSG_OPT2T
 STA ZP_ADDR
 LDA #>MSG_OPT2T
 STA ZP_ADDR+1
 JSR PRINT
*
 LDA #9
 STA CV
 JSR VTAB
 LDA #32
 STA CH
 LDA #<MSG_OPT3T
 STA ZP_ADDR
 LDA #>MSG_OPT3T
 STA ZP_ADDR+1
 JSR PRINT
*
 LDA #10
 STA CV
 JSR VTAB
 LDA #32
 STA CH
 LDA #<MSG_OPT4T
 STA ZP_ADDR
 LDA #>MSG_OPT4T
 STA ZP_ADDR+1
 JSR PRINT
*
 LDA #11
 STA CV
 JSR VTAB
 LDA #32
 STA CH
 LDA #<MSG_OPT5T
 STA ZP_ADDR
 LDA #>MSG_OPT5T
 STA ZP_ADDR+1
 JSR PRINT
*
 LDA #12
 STA CV
 JSR VTAB
 LDA #31
 STA CH
 LDA #<MSG_DIV
 STA ZP_ADDR
 LDA #>MSG_DIV
 STA ZP_ADDR+1
 JSR PRINT
*
 LDA #14
 STA CV
 JSR VTAB
 LDA #27
 STA CH
 LDA #<MSG_PROMPT
 STA ZP_ADDR
 LDA #>MSG_PROMPT
 STA ZP_ADDR+1
 JSR PRINT
 RTS
*
********************************
* STRINGS                      *
********************************
*
MSG_TITLE
 ASC "BYTE HAMR UTILS"
 HEX 00
MSG_VER
 ASC "V1.0.0"
 HEX 00
MSG_AUTH
 ASC "ROB RICO"
 HEX 00
MSG_DIV
 ASC "---------------------"
 HEX 00
MSG_OPT1 ASC "EXECUTE OPTION 1"
 HEX 00
MSG_OPT2 ASC "EXECUTE OPTION 2"
 HEX 00
MSG_OPT3 ASC "EXECUTE OPTION 3"
 HEX 00
MSG_OPT4 ASC "EXECUTE OPTION 4"
 HEX 00
MSG_OPT5 ASC "EXECUTE OPTION 5"
 HEX 00
MSG_OPT1T
 ASC "1. LOAD DATA"
 HEX 00
MSG_OPT2T
 ASC "2. SAVE DATA"
 HEX 00
MSG_OPT3T
 ASC "3. EDIT DATA"
 HEX 00
MSG_OPT4T
 ASC "4. DELETE DATA"
 HEX 00
MSG_OPT5T
 ASC "5. EXIT"
 HEX 00
MSG_PROMPT
 ASC "ENTER A COMMAND:"
 HEX 00
